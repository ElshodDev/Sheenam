@* ===================================================
   Copyright (c) Coalition of Good-Hearted Engineers
   Free To Use To Find Comfort and Peace
   =================================================== *@

@using Sheenam.Blazor.Models.ViewModels
@using Sheenam.Blazor.Models.Foundations.Guests

<div class="guest-card @(IsSelected ? "selected" : "")">
    <div class="guest-card-header">
        <div class="guest-avatar">
            @GetInitials()
        </div>
        <div class="guest-info">
            <h3 class="guest-name">@ViewModel.FullName</h3>
            <p class="guest-email">@ViewModel.Guest.Email</p>
        </div>
    </div>

    <div class="guest-card-body">
        <div class="guest-detail">
            <span class="detail-label">Age:</span>
            <span class="detail-value">@ViewModel.Age years</span>
        </div>
        <div class="guest-detail">
            <span class="detail-label">Gender:</span>
            <span class="detail-value">@ViewModel.GenderDisplay</span>
        </div>
        <div class="guest-detail">
            <span class="detail-label">Phone:</span>
            <span class="detail-value">@ViewModel.Guest.PhoneNumber</span>
        </div>
        <div class="guest-detail">
            <span class="detail-label">Address:</span>
            <span class="detail-value">@ViewModel.Guest.Address</span>
        </div>
    </div>

    <div class="guest-card-footer">
        <button class="btn btn-sm btn-primary" @onclick="() => OnEdit.InvokeAsync(ViewModel.Guest)">
            Edit
        </button>
        <button class="btn btn-sm btn-info" @onclick="() => OnView.InvokeAsync(ViewModel.Guest)">
            View
        </button>
        <button class="btn btn-sm btn-danger" @onclick="() => OnDelete.InvokeAsync(ViewModel.Guest)">
            Delete
        </button>
    </div>
</div>

@code {
    [Parameter]
    public GuestViewModel ViewModel { get; set; }

    [Parameter]
    public EventCallback<Guest> OnEdit { get; set; }

    [Parameter]
    public EventCallback<Guest> OnView { get; set; }

    [Parameter]
    public EventCallback<Guest> OnDelete { get; set; }

    [Parameter]
    public bool IsSelected { get; set; }

    private string GetInitials()
    {
        var firstName = ViewModel.Guest?.FirstName ?? "";
        var lastName = ViewModel.Guest?.LastName ?? "";
        
        return $"{firstName.FirstOrDefault()}{lastName.FirstOrDefault()}".ToUpper();
    }
}
